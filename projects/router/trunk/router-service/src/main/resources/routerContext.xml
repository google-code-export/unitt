<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <description>
        Spring Config
    </description>

    <!-- **************************************************************** -->
    <!-- Cloud Framework -->
    <!-- **************************************************************** -->
    <!-- Hazelcast Stuff -->
    <bean name="HazelcastClient" class="com.hazelcast.client.HazelcastClient"
          factory-method="newHazelcastClient">
        <constructor-arg ref="HazelcastConfig" />
    </bean>

    <bean name="HazelcastConfig" class="com.hazelcast.client.ClientConfig">
        <!--
        <property name="groupConfig" ref="HazelcastGroupConfig"/>
        -->
    </bean>

    <!--
    <bean name="HazelcastGroupConfig" class="com.hazelcast.config.GroupConfig">
    <property name="name" value="dev"/>
    <property name="password" value="dev-pass"/>
    </bean>
    -->


    <!-- **************************************************************** -->
    <!-- Messaging Framework -->
    <!-- **************************************************************** -->
    <bean id="Router" class="com.unitt.router.RouterImpl">
        <property name="hazelcastClient" ref="HazelcastClient"/>
        <property name="requestQueueName" value="message-routing"/>
        <property name="queueTimeoutInMillis" value="30000"/>
        <property name="numberOfWorkers" value="10"/>
    </bean>

    <bean id="SerializerRegistry" class="com.unitt.servicemanager.websocket.MessageSerializerRegistry">
        <constructor-arg>
            <list>
                <ref bean="JsonSerializer"/>
            </list>
        </constructor-arg>
    </bean>

    <bean id="JsonSerializer" class="com.unitt.servicemanager.serializer.JacksonJsonSerializer"/>

</beans>
